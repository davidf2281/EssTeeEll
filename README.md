# EssTeeEll
### Multithreaded Parsing of Binary STL Files in Swift

![screenshot](https://github.com/davidf2281/EssTeeEll/blob/readme-assets/Screenshot.png)

A skeleton macOS app that will parse and display STL files, as generated by most CAD software as the intermediate format before slicing and 3D printing.

I've made this public in case anyone is interested in the parsing side of things; the app itself simply generates a SceneKit 3D view of the model so isn't much use by itself except to demonstrate that the parsing works. Think of this repo an elaborate gist.

The relevant STL parsing methods are `parseBinary`, `readFacetData`, `processFacetDataBuffer` and `parseMeshWithFacetBuffer` which you'll find in [MeshParser.Swift](https://github.com/davidf2281/EssTeeEll/blob/main/EssTeeEll/Model/MeshParser.swift). 

The result of a call to `parseBinary` along with a file URL is a [Solid](https://github.com/davidf2281/EssTeeEll/blob/main/EssTeeEll/Model/Solid.swift) struct which mirrors the STL format's arrangement and terminology: a `Solid` has a name and an array of `Facet`s. Each `Facet` has a defining outerloop of vertices along with a facet normal.

Only parsing of binary files is supported. Technically STL files can also be in ASCII format but it's extremely rare these days so hasn't been implemented at this stage.

Parsing is fully multithreaded to use all available cores, and it avoids memory-copy operations as far as possible by preferring `UnsafeMutableRawPointer` buffers over higher-level constructs, so you should find performance pretty good. You might find it useful as a basis for extending, depending on your needs.

Note that there are currently no checks in place for available memory, which would probably need to be implemented in a production context.
